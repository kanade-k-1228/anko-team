# agents/bin

このディレクトリには、エージェント間通信のためのユーティリティコマンドが含まれています。

## send コマンド

`send` は、tmux セッション内でエージェント間のメッセージ送信を行うためのコマンドです。

### 使用方法

```bash
send <target> <message>
```

### パラメータ

- `target`: 送信先のターゲット（mgr, manager, dev-1, dev-2, dev-3, dev-4 のいずれか）
- `message`: 送信するメッセージ（二重引用符で囲むことを推奨）

### 使用例

#### マネージャーへの報告

```bash
# タスク完了報告
send mgr "[DONE T001 1] Docker環境の最適化を完了しました"

# 進捗報告
send mgr "[PROGRESS T002 1] CI/CDパイプラインを構築中です（50%完了）"

# エラー報告
send mgr "[FAIL T003 1] ビルドエラーが発生しました"

# 質問
send mgr "[ASK T004 1] この仕様について確認したいです"

# ブロッカー報告
send mgr "[BLOCKED T005 1] 他のタスクの完了を待っています"
```

#### 他のエージェントへの通信

```bash
# dev-2 へメッセージ送信
send dev-2 "フロントエンドのコンポーネントを確認してください"

# dev-3 へメッセージ送信
send dev-3 "APIエンドポイントの仕様を教えてください"
```

### 重要な注意事項

1. **PATH への追加**: `agents/launch.sh` スクリプトを使用して tmux セッションを起動すると、`agents/bin` ディレクトリが自動的に PATH に追加されます。
2. **Enter キーの自動付与**: send コマンドは自動的にメッセージの最後に Enter キーを付与します。手動で Enter を追加する必要はありません。
3. **日本語対応**: 日本語メッセージも問題なく送信できます。
4. **二重引用符の使用**: スペースを含むメッセージは必ず二重引用符で囲んでください。

### 応答フォーマット

マネージャーへの報告時は、以下のフォーマットを使用してください：

| 応答種別     | 形式                     | 説明               |
| ------------ | ------------------------ | ------------------ |
| 状態確認応答 | `[IDLE n]`               | タスク待機中       |
|              | `[BUSY n]`               | タスク実行中       |
| タスク完了   | `[DONE Txxx n] 説明`     | タスク完了報告     |
| 進捗報告     | `[PROGRESS Txxx n] 説明` | 進捗状況報告       |
| エラー報告   | `[FAIL Txxx n] 説明`     | エラー発生         |
| 質問         | `[ASK Txxx n] 質問`      | マネージャーへ質問 |
| ブロッカー   | `[BLOCKED Txxx n] 理由`  | 作業がブロック     |

- `Txxx`: タスク番号（例: T001, T005）
- `n`: エージェント番号

### トラブルシューティング

1. **コマンドが見つからない場合**

   - tmux セッションが `agents/launch.sh` で起動されていることを確認してください
   - `echo $PATH` で `agents/bin` が含まれているか確認してください
   - 手動で PATH に追加する場合: `export PATH="$PATH:/path/to/agents/bin"`

2. **メッセージが送信されない場合**

   - ターゲット名が正しいか確認してください
   - tmux セッション内で実行していることを確認してください
   - `tmux list-panes` でペインが存在することを確認してください
