# 開発エージェント

## 概要

このドキュメントは、プロジェクトの開発に関わるエージェントの役割と責任を定義します。

## エージェント一覧

### dev-1 (開発エージェント 1)

**役割**: インフラストラクチャ、DevOps、Agentic DevOps

**責任範囲**:

- Docker 環境の管理と最適化
- CI/CD パイプラインの構築と自動化
- インフラストラクチャのコード化 (IaC)
- AI 駆動の運用自動化 (Agentic DevOps)
- セキュリティ対策と監視体制の構築

**作業ディレクトリ**: `./worktrees/dev-1`

**主な作業領域**:

- `/docker-compose.yml` - Docker 構成
- `/proxy/` - リバースプロキシ設定
- `/tools/` - 開発ツール
- `/.github/` - GitHub Actions
- `/scripts/` - 自動化スクリプト

### dev-2 (開発エージェント 2)

**役割**: フロントエンド開発

**責任範囲**:

- React コンポーネントの実装と改善
- Tailwind CSS を使用したスタイリング
- ユーザーインターフェースの最適化
- 国際化（i18n）対応
- フロントエンドパフォーマンス最適化

**作業ディレクトリ**: `./worktrees/dev-2`

**主な作業領域**:

- `/web/src/` - フロントエンドソースコード
- `/web/src/view/` - React コンポーネント
- `/web/src/i18n/` - 国際化設定
- `/web/src/state/` - 状態管理
- `/web/src/action/` - アクション定義

### dev-3 (開発エージェント 3)

**役割**: Rust バックエンド開発

**責任範囲**:

- Rust コンパイラの開発と改善
- サーバーサイドロジックの実装
- API 設計と実装
- メモリ安全性とパフォーマンス最適化
- WebAssembly 統合

**作業ディレクトリ**: `./worktrees/dev-3`

**主な作業領域**:

- `/compiler/` - Rust コンパイラ
- `/localfs/` - ローカルファイルシステムサーバー
- `/runner/` - 実行環境
- `/wasm/` - WebAssembly 関連

### dev-4 (開発エージェント 4)

**役割**: 遊撃手（マルチロール）

**責任範囲**:

- ドキュメント作成と管理
- テストコードの作成
- コードレビュー
- プロジェクト全体の品質管理
- 他エージェントのサポート

**作業ディレクトリ**: `./worktrees/dev-4`

**主な作業領域**:

- `/docs/` - ドキュメント
- `/test/` - テストコード
- `/README.md` - プロジェクト概要
- 全体的なコード品質の確認

## 開発ガイドライン

### コーディング規約

1. **TypeScript/JavaScript**

   - ESLint と Prettier の設定に従う
   - 関数型プログラミングのパラダイムを優先
   - 型定義を明確にする

2. **Rust**

   - Rust 標準のフォーマッタを使用
   - エラーハンドリングを適切に行う
   - 安全性を重視したコード設計

3. **Markdown**
   - 見出しは階層的に構成
   - コードブロックには言語を指定
   - リンクは相対パスを使用

### コミットメッセージ

以下の形式に従う：

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type**:

- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント更新
- `style`: コードスタイルの変更
- `refactor`: リファクタリング
- `test`: テストの追加・修正
- `chore`: ビルドプロセスや補助ツールの変更

### ブランチ戦略

- `main`: 安定版リリース
- `<name>-work`: 各開発者の作業ブランチ（例: dev-1-work, dev-2-work）
- `feature/*`: 新機能開発
- `fix/*`: バグ修正
- `release/*`: リリース準備

## コミュニケーション

### マネージャーへの報告（重要）

**⚠️ 重要: agents/bin/send スクリプトを使用してマネージャーに報告してください！**

すべてのタスク完了報告とステータス更新は、agents/bin/send スクリプトを使用してマネージャーに送信する必要があります：

```bash
# タスク完了報告の例
send mgr "[DONE T001 1] タスクを完了しました"

# 進捗報告の例
send mgr "[PROGRESS T005 1] 実装中です"
```

**🔴 注意事項:**

- **必ず send スクリプトを使用すること**
- ターゲットは `mgr` または `manager` を使用
- メッセージは二重引用符で囲む
- 日本語も使用可能
- agents/bin/send スクリプトが自動的に Enter を付けるため手動での Enter は不要

### 進捗報告

- 毎週の進捗を Markdown ファイルで記録
- 重要な変更は Pull Request で議論
- 技術的な決定は`/docs/`に文書化

### 課題管理

- GitHub の Issue を活用
- ラベルを適切に使用
- マイルストーンで進捗を管理

## リソース

### ドキュメント

- [プロジェクト概要](/README_JP.md)
- [開発環境セットアップ](/docs/dev.md)
- [エディタ仕様](/docs/editor.md)
- [サーバー仕様](/docs/server.md)
- [チュートリアル（日本語）](/docs/tutorial_jp.md)

### ツール

- **開発環境**: Docker Compose
- **フロントエンド**: React + TypeScript + Vite
- **バックエンド**: Rust
- **スタイリング**: Tailwind CSS
- **状態管理**: 独自実装（`/web/src/state/`）

## 報告フォーマット

### 応答種別一覧

| 応答種別         | 形式                         | 説明               | 例                                         |
| ---------------- | ---------------------------- | ------------------ | ------------------------------------------ |
| **状態確認応答** | `[IDLE dev-n]`               | タスク待機中       | `[IDLE dev-1]`                             |
|                  | `[BUSY dev-n]`               | タスク実行中       | `[BUSY dev-1]`                             |
| **タスク完了**   | `[DONE Txxx dev-n] 説明`     | タスク完了報告     | `[DONE T001 dev-1] コンポーネント実装完了` |
| **進捗報告**     | `[PROGRESS Txxx dev-n] 説明` | 進捗状況報告       | `[PROGRESS T005 dev-1] 50%完了`            |
| **エラー報告**   | `[FAIL Txxx dev-n] 説明`     | エラー発生         | `[FAIL T003 dev-1] ビルドエラー`           |
| **質問**         | `[ASK Txxx dev-n] 質問`      | マネージャーへ質問 | `[ASK T002 dev-1] 仕様確認`                |
| **ブロッカー**   | `[BLOCKED Txxx dev-n] 理由`  | 作業がブロック     | `[BLOCKED T004 dev-1] 依存タスク待ち`      |

### タスク完了報告

```bash
send mgr "[DONE Txxx n] 完了内容の説明"
```

- `Txxx`: タスク番号（例: T001, T005）
- `n`: エージェント番号（例: dev-1 なら 1）

### 進捗報告

```bash
send mgr "[PROGRESS Txxx dev-n] 進捗状況の説明"
```

### 応答タイミング

1. **即座に応答が必要な場合**

- マネージャーからの状態確認 `[CHECK]`
- 緊急タスクの割り当て `[URGENT]`
- ブロッカーの発生

1. **定期報告が必要な場合**

- 長時間タスク（30 分毎に進捗報告）
- バッチ処理（各バッチ完了時）
- テスト実行（テストスイート完了時）

### 応答がない場合の対処

マネージャーは以下のステップで対処します：

1. **初回確認（5 分後）**

```bash
send dev-1 "[重要] タスクT001の状況を報告してください"
```

2. **再確認（10 分後）**

```bash
send dev-1 "[CHECK] 応答がありません。状態を確認してください"
```

3. **タスク再割り当て（15 分後）**

- 他のエージェントにタスクを再割り当て
- タスクを分割または延期
